---
import Layout from '../layouts/Layout.astro';
import categorias from '../data/cursos.json';
const title = 'Cursos IFCET | Programas profesionales con clases en vivo';
const description = 'Explora cursos de contabilidad, tributación, finanzas, laboral y auditoría. Metodología práctica, docentes expertos y certificación.';
const image = '/favicon.webp';
import cursosImagen from '../assets/IFCET-cursos-certificados-diplomados-seminarios-tributacion-laboral-finanzas-auditoria-peritaje-Peru.webp';
import personaSosteniendoUnaLaptop from '../assets/persona-sosteniendo-una-laptop-ifcet.webp';
import ifcetcontadores from '../assets/ifcet-contadores.webp'
---

<Layout {title} {description} {image}>
  <div class="w-full">
    <!-- Hero Section -->
    <section class="bg-gradient-to-b from-slate-900 via-slate-900 to-black text-white">
      <div class="max-w-7xl mx-auto pt-20">
        <div class="grid md:grid-cols-2 items-center gap-8 ">
          <div class="space-y-5">
            <h1 class="text-[clamp(1.8rem,4.5vw,3rem)] font-extrabold leading-tight">
              Descubre nuestros cursos profesionales
            </h1>
            <p class="text-white/80 text-[clamp(0.95rem,1.8vw,1.05rem)]">
              Programas diseñados para potenciar tu perfil en contabilidad, tributación y gestión empresarial. Clases en vivo, enfoque práctico y certificación.
            </p>
            <div class="flex flex-wrap gap-3">
              <a href="#categorias-cursos" class="px-5 py-2.5 rounded-lg text-sm font-medium bg-[#ffb403] text-black hover:scale-[1.02] transition-transform">
                Ver categorías disponibles
              </a>
              <a href="/contacto#contacto" class="px-5 py-2.5 rounded-lg text-sm font-medium bg-white/10 text-white border border-white/30 hover:bg-white/15 hover:scale-[1.02] transition-transform">
                Contáctanos
              </a>
            </div>
          </div>
          <div class="relative h-[32vh] md:h-[46vh] w-full items-center justify-center hidden sm:flex">
            <img src={personaSosteniendoUnaLaptop.src} alt="Cursos" class="max-w-full max-h-full object-contain" />
          </div>
        </div>
      </div>
    </section>

    <!-- Categorías de Cursos -->
    <section id="categorias-cursos" class="bg-white w-screen">
      <div class="w-full bg-slate-200 flex sm:flex-row flex-col justify-center items-center ">
        <div class="p-4 w-full sm:w-1/2 sm:p-4 sm:ml-8 lg:ml-60">
          <div class="sm:max-w-xl text-pretty">
            <h2 class="text-xl md:text-3xl font-extrabold text-gray-900">El complemento ideal para tu formación académica ;)</h2>
            <p class="text-gray-600 mt-2 text-pretty text-sm sm:text-base">
              Eleva tus competencias académicas con la formación en contabilidad de IFCET. Descubre por qué las principales compañías confían en nuestra plataforma para el desarrollo de sus profesionales. 
              Nuestros cursos, diseñados por expertos, ofrecen las herramientas y conocimientos esenciales para gestionar las finanzas de forma eficiente y estratégica. Capacitacitate con los programas de contabilidad 
              más demandados y asegura el éxito financiero de tu organización.
            </p>
          </div>
        </div>
        <div class="w-full sm:w-1/2">
          <img src={cursosImagen.src} alt="persona-sosteniendo-una-laptop-ifcet" >
        </div>
      </div>
      <div class="max-w-7xl mx-auto px-4 py-12 md:py-16 ">

        {categorias.map((categoria, categoriaIndex) => (
          <div class="mb-16 last:mb-0">
            <!-- Encabezado de categoría -->
            <div class="mb-8 bg-slate-100 p-4 rounded-lg">
              <h3 class="text-xl md:text-2xl font-bold text-gray-900 mb-3">{categoria.categoria}</h3>
              <p class="text-gray-600 max-w-3xl">{categoria.descripcion}</p>
            </div>

            <!-- Grid de cursos -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
              {categoria.cursos.slice(0, 4).map((curso) => (
                <article class="group relative flex flex-col rounded-3xl bg-white shadow-md hover:shadow-2xl transition-all duration-300 hover:-translate-y-1 overflow-hidden border border-gray-100">
                  <!-- Imagen -->
                  <div class="relative aspect-square overflow-hidden">
                    <img src={curso.img} alt={curso.title} 
                      class="absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" 
                      loading="lazy" />
                    {curso.brochure && (
                      <button
                        onclick={`window.open('${curso.brochure}', '_blank')`}
                        class="absolute bottom-3 right-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:scale-[1.10] transition-all duration-300 hover:bg-blue-700 text-white text-xs font-semibold px-2 py-1 rounded-md shadow-lg cursor-pointer"
                      >
                        Ver Brochure
                      </button>
                    )}
                  </div>

                  <!-- Contenido -->
                  <div class="flex-1 flex flex-col p-6">
                    <img src={ifcetcontadores.src} alt="ifcet-contadores" class="w-50 h-auto object-contain" />
                    <h4 class="text-lg font-bold text-[#010943] group-hover:text-blue-600 transition-colors line-clamp-2">
                      Curso especializado:
                    </h4>
                    <h4 class="text-lg font-bold text-[#010943] group-hover:text-blue-600 transition-colors line-clamp-2">
                      {curso.title}
                    </h4>

                    <p class="text-sm text-gray-600 mb-4 line-clamp-2">{curso.docente}</p>

                    <div class="flex flex-wrap gap-2 text-xs text-gray-600 mb-4">
                      <span class="px-2 py-1 rounded-full bg-gray-100">{curso.lessons} lecciones</span>
                      <span class="px-2 py-1 rounded-full bg-gray-100">{curso.students} estudiantes</span>
                      <span class="px-2 py-1 rounded-full bg-gray-100">{curso.duration}h</span>
                    </div>

                    <!-- CTA -->
                    <a href={curso.link} target="_blank" rel="noopener noreferrer" 
                      class="mt-auto inline-flex items-center justify-center w-full bg-gradient-to-r from-amber-500 to-orange-500 hover:from-blue-600 hover:to-indigo-600 text-white font-semibold py-3 px-4 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl">
                      Solicitar información
                      <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                      </svg>
                    </a>
                  </div>
                </article>
              ))}
            </div>

            <!-- Cursos adicionales (ocultos inicialmente) -->
            {categoria.cursos.length > 4 && (
              <div id={`cursos-adicionales-${categoriaIndex}`} class="hidden mt-6">
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                  {categoria.cursos.slice(4).map((curso) => (
                    <article class="group relative flex flex-col rounded-3xl bg-white shadow-md hover:shadow-2xl transition-all duration-300 hover:-translate-y-1 overflow-hidden border border-gray-100">
                      <!-- Imagen -->
                      <div class="relative aspect-square overflow-hidden">
                        <img src={curso.img} alt={curso.title} 
                          class="absolute inset-0 w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" 
                          loading="lazy" />
                        {curso.brochure && (
                          <button
                            onclick={`window.open('${curso.brochure}', '_blank')`}
                            class="absolute bottom-3 right-3 bg-gradient-to-r from-amber-500 to-orange-500 hover:bg-blue-700 text-white text-xs font-semibold px-2 py-1 rounded-md transition-colors duration-200 shadow-lg cursor-pointer"
                          >
                            Ver Brochure
                          </button>
                        )}
                      </div>

                      <!-- Contenido -->
                      <div class="flex-1 flex flex-col p-6">
                        <h4 class="text-lg font-bold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors line-clamp-2">
                          {curso.title}
                        </h4>

                        <p class="text-sm text-gray-600 mb-4 line-clamp-2">{curso.docente}</p>

                        <div class="flex flex-wrap gap-2 text-xs text-gray-600 mb-4">
                          <span class="px-2 py-1 rounded-full bg-gray-100">{curso.lessons} lecciones</span>
                          <span class="px-2 py-1 rounded-full bg-gray-100">{curso.students} estudiantes</span>
                          <span class="px-2 py-1 rounded-full bg-gray-100">{curso.duration}h</span>
                        </div>

                        <!-- CTA -->
                        <a href={curso.link} target="_blank" rel="noopener noreferrer" 
                          class="mt-auto inline-flex items-center justify-center w-full bg-gradient-to-r from-amber-500 to-orange-500 hover:from-blue-600 hover:to-indigo-600 text-white font-semibold py-3 px-4 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl">
                          Solicitar información
                          <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                          </svg>
                        </a>
                      </div>
                    </article>
                  ))}
                </div>
              </div>
            )}

            <!-- Botón Mostrar más/menos si hay más de 4 cursos -->
            {categoria.cursos.length > 4 && (
              <div class="mt-8 flex justify-center">
                <button 
                  id={`btn-toggle-${categoriaIndex}`}
                  class="px-6 py-3 text-sm font-medium text-blue-600 bg-white border border-blue-600 rounded-lg hover:bg-blue-50 transition-colors"
                  onclick={`toggleCursos(${categoriaIndex}, ${categoria.cursos.length - 4})`}
                >
                  Mostrar {categoria.cursos.length - 4} más
                </button>
              </div>
            )}
          </div>
        ))}
      </div>
    </section>
  </div>

  <script is:inline>
    function toggleCursos(categoriaIndex, cantidadCursos) {
      const cursosAdicionales = document.getElementById(`cursos-adicionales-${categoriaIndex}`);
      const btnToggle = document.getElementById(`btn-toggle-${categoriaIndex}`);
      
      if (!cursosAdicionales || !btnToggle) return;
      
      if (cursosAdicionales.classList.contains('hidden')) {
        // Mostrar cursos adicionales
        cursosAdicionales.classList.remove('hidden');
        btnToggle.textContent = `Mostrar menos`;
        btnToggle.classList.remove('text-blue-600', 'border-blue-600', 'hover:bg-blue-50');
        btnToggle.classList.add('text-orange-600', 'border-orange-600', 'hover:bg-orange-50');
      } else {
        // Ocultar cursos adicionales
        cursosAdicionales.classList.add('hidden');
        btnToggle.textContent = `Mostrar ${cantidadCursos} más`;
        btnToggle.classList.remove('text-orange-600', 'border-orange-600', 'hover:bg-orange-50');
        btnToggle.classList.add('text-blue-600', 'border-blue-600', 'hover:bg-blue-50');
      }
    }
  </script>
</Layout>